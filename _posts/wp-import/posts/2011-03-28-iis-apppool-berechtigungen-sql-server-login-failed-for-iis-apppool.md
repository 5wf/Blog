---
layout: post
title: "IIS AppPool Berechtigungen & SQL Server &quot;Login failed for 'IIS AppPool'&quot;"
date: 2011-03-28 21:49
author: robert.muehsig
comments: true
categories: [HowTo]
tags: [Fix, HowTo, SQL]
---
{% include JB/setup %}
<p><a href="{{BASE_PATH}}/assets/wp-images/image1225.png"><img style="border-bottom: 0px; border-left: 0px; margin: 0px 10px 0px 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb405.png" width="162" height="103" /></a>Der typische Microsoft Stack aus IIS &amp; SQL Server sollte sich eigentlich glänzend verstehen. Ab und an gibt es aber doch ein paar Unklarheiten - insbesondere wenn man Windows Authentication benutzt.</p>  <p></p>  <p><strong>Fehlermeldung "Login failed for 'IIS AppPool\ASP.NET v4.0”</strong></p>  <p>Diese oder eine ähnliche Fehlermeldung ist in der Standardkonfiguration meistens recht frustrierend. </p>  <p>Es gibt drei Lösungswege:</p>  <ul>   <li>In der Web.config von Integrated Security z.B. auf SQL Auth umstellen.</li>    <li>Die ApplicationPool Identity umstellen (aber auf was, wenn das auch nicht geht ;) )</li>    <li>Im SQL Server die Berechtigungen richten...</li> </ul>  <p>Wir entscheiden uns für Nr. 3, weil auch bei den anderen beiden Optionen muss man früher oder später die Berechtigungen editieren.</p>  <p><strong>SQL Server Berechtigungen ändern</strong></p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1226.png"><img style="border-bottom: 0px; border-left: 0px; margin: 0px 10px 0px 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb406.png" width="232" height="400" /></a> </p>  <p>Der Punkt "Security” - "Logins” ist der erste Einstiegspunkt. Dort muss erst mal der User muss dem SQL Server bekannt gemacht werden. </p>  <p>Hier gibt es eine kleine Tücke: Die "IIS AppPool” Benutzer findet man dummerweise nicht so einfach... </p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>Selbst in der Auflistung aller Accounts, werden die IIS AppPool User nicht auftauchen...</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1227.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb407.png" width="271" height="379" /></a> </p>  <p>Davon aber nicht irritieren lassen - entweder man macht Copy &amp; Paste aus der Fehlermeldung oder man tippt den User des AppPools manuell rein.</p>  <p><strong>IIS AppPool Identies: Aufgebaut nach Schema "IIS AppPool\WEBSITE” bzw. "IIS AppPool\ASP.NET v4.0”</strong></p>  <p>Wenn man eine eigene Websites anlegt, legt der IIS automatisch einen neuen Application Pool samt <a href="http://serverfault.com/questions/186923/login-failed-for-iis-apppool-asp-net-v4-0-sql-server-web">einer Identity mit der Bildungsregel oben an</a>. Dieser User muss natürlich a) dem SQL Server als Login bekannt gemacht werden und b) bei der jeweiligen Datenbank entsprechen berechtigt werden.</p>  <p>So hat es jedenfalls bei mir immer geklappt.</p>
