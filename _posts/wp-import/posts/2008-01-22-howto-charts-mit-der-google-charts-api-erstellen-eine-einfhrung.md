---
layout: post
title: "HowTo: Charts mit der Google Charts API erstellen - eine Einführung"
date: 2008-01-22 23:50
author: robert.muehsig
comments: true
categories: [HowTo]
tags: [API, Charts, Google, Google Chart API, HowTo]
language: de
---
{% include JB/setup %}
<p>Still und leise hat Google eine weitere API vor einer kleinen Weile veröffentlicht: Die <a href="http://code.google.com/apis/chart/" target="_blank">Google Chart API</a>. Was kann man mit dieser anstellen? Hier ein kurzer Überblick.</p> <p><strong>Wie funktioniert das und was kostet es?</strong></p> <p>Die Google Chart API ist recht einfach gestrickt:</p> <p>Eine spezielle URL wird zusammengebaut und Google rendert daraus ein PNG Bild, welches man überall einsetzen kann. <strong>Maximal 50.000 Requests pro User (ich nehm an die IP wird geloggt) und pro Tag</strong> sind allerdings erlaubt - aber der<strong> Service ist sonst kostenlos</strong> und <strong>erfordert keine Anmeldung</strong> (daher der Gedanke mit der IP). <br>Böswillige Menschen könnten Google natürlich unterstellen, dass der Preis die geschickten Daten sind - Datenschutz olÃ© ;)</p> <p>Schauen wir uns erstmal an, was die Charts API uns bieten kann, bevor wir zu den fachlichen Teil kommen:</p> <p><strong>Was für Charts gibt es eigentlich?</strong></p> <p><a href="{{BASE_PATH}}/assets/wp-images/image244.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="268" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb223.png" width="311" border="0"></a> </p> <p>Diese 5 Chart Typen sind momentan in der Google Chart API enthalten:</p> <ul> <li><a href="http://code.google.com/apis/chart/#line_charts" target="_blank">Line Chart</a>  <li><a href="http://code.google.com/apis/chart/#bar_charts" target="_blank">Bar Chart</a>  <li><a href="http://code.google.com/apis/chart/#pie_charts" target="_blank">Pie Chart</a>  <li><a href="http://code.google.com/apis/chart/#venn" target="_blank">Ven Diagrams</a>  <li><a href="http://code.google.com/apis/chart/#scatter_plot" target="_blank">Scatter Plots</a></li></ul> <p>Dabei haben einige Typen noch "Subtypen" enthalten - auf dem Screenshot ist ein kleiner Teil zu sehen.</p> <p><strong>Sieht nett aus, was muss ich tun?</strong></p> <p>Die Grundstruktur für die API - URL ist folgende:</p> <p><code>http://chart.apis.google.com/chart?&lt;parameter 1&gt;&amp;&lt;parameter 2&gt;</code><code>&amp;&lt;parameter n&gt;</code>  <p><u>Die 3 "wichtigen Parameter Typen":</u></p> <ul> <li><a href="http://code.google.com/apis/chart/#chart_size" target="_blank">Chart Größe</a>:  <ul> <li>Parameterstruktur: chx=[height]x[width]  <li>Beispiel: chs=300x500  <li>Live: <a href="http://chart.apis.google.com/chart?cht=lc&amp;chs=150x125&amp;chd=s:helloWorld&amp;chxt=x,y&amp;chxl=0:|Mar|Apr|May|June|July|1:||50+Kb" target="_blank">Beispiel</a>  <li>Hinweis: 1000 Pixel ist das Maximum!</li></ul> <li><a href="http://code.google.com/apis/chart/#chart_data" target="_blank">Chart Daten</a>:  <ul> <li>Aufgrund der URL Beschränkung auf ca. 255 Zeichen (müsste hinkommen ;) ) hat Google die Möglichkeit eingebaut, seine Daten zu codiergen, dabei gibt es drei Möglichkeiten, bei den Beispielen sollte immer auf die URL geachtet werden:  <ul> <li><a href="http://code.google.com/apis/chart/#simple" target="_blank">Simple encoding</a>  <ul> <li>Parameter: chd=s:[data]  <li>Max. 62 Werte  <li>Live: <a href="http://chart.apis.google.com/chart?cht=lc&amp;chs=200x100&amp;chd=s:fohmnytenefohmnytene&amp;chxt=x,y&amp;chxl=0:|Apr|May|June|1:||50+Kb" target="_blank">Beispiel</a></li></ul> <li><a href="http://code.google.com/apis/chart/#text" target="_blank">Text encoding</a>  <ul> <li>Parameter: chd=t:[data]  <li>Max. 1000 Werte  <li>Live: <a href="http://chart.apis.google.com/chart?cht=lxy&amp;chs=200x125&amp;chd=t:0,30,60,70,90,95,100|20,30,40,50,60,70,80|10,30,40,45,52|100,90,40,20,10|-1|5,33,50,55,7&amp;chco=3072F3,ff0000,00aaaa&amp;chls=2,4,1&amp;chm=s,FF0000,0,-1,5|s,0000ff,1,-1,5|s,00aa00,2,-1,5" target="_blank">Beispiel</a></li></ul> <li><a href="http://code.google.com/apis/chart/#extended" target="_blank">Extended encoding</a>  <ul> <li>Parameter: chd=e:[data]  <li>Max. 4096 Werte</li></ul></li></ul> <li>Da diese Encodierung meistens programmatisch entstehen soll, hat Google <a href="http://code.google.com/apis/chart/#encoding_data" target="_blank">Java Script Snippets</a> bereitgestellt und sammelt zudem in ihrem <a href="http://groups.google.com/group/google-chart-api/browse_thread/thread/f2330596b27eb3df" target="_blank">Google Groups</a> weitere Links zu der Google Chart API.</li></ul> <li><a href="http://code.google.com/apis/chart/#chart_type" target="_blank">Chart Type:</a>  <ul> <li>Als dritter wichtiger Parameter dient der Typ der Charts:  <li>Parameterstruktur: cht=[type]  <li>Bestimmte Typen haben bestimmte andere Merkmale - Google hat dies bereits gut in einer <a href="http://code.google.com/apis/chart/#optional_param_by_chart_type" target="_blank">Tabelle</a> zusammengefasst.</li></ul></li></ul> <p><u>Andere Parametertypen:</u></p> <ul> <li><u>Man kann natürlich die </u><a href="http://code.google.com/apis/chart/#chart_colors" target="_blank">Farbe</a><u>, je nach Typ entsprechend, anpassen:</u>  <ul> <li>Data Set Colors:  <ul> <li>Parameterstruktur: chco=[hex],[hex],...</li></ul> <li><a href="http://code.google.com/apis/chart/#solid_fill" target="_blank">Solid fill</a>  <li><a href="http://code.google.com/apis/chart/#linear_gradient" target="_blank">Linear gradient</a>  <li><a href="http://code.google.com/apis/chart/#linear_stripes" target="_blank">Linear stripes</a></li></ul></li></ul> <p><a href="{{BASE_PATH}}/assets/wp-images/image245.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="417" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb224.png" width="298" border="0"></a> </p> <ul> <li><a href="http://code.google.com/apis/chart/#label_options" target="_blank">Labels</a> <u>können ebenfalls gesetzt werden:</u></li></ul> <p><a href="{{BASE_PATH}}/assets/wp-images/image246.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="338" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb225.png" width="344" border="0"></a> </p> <ul> <ul> <li><a href="http://code.google.com/apis/chart/#chtt" target="_blank">Title</a>: chtt=[Title]  <li><a href="http://code.google.com/apis/chart/#chdl" target="_blank">Legend</a>: chdl=[Legend1]|[Legend2]|[Legend...]  <li><a href="http://code.google.com/apis/chart/#pie_labels" target="_blank">Pie Charts</a>: chl=[Lenged1]|[Legned2]...  <li><a href="http://code.google.com/apis/chart/#multiple_axes_labels" target="_blank">Multiple Axis</a>: chxt=...</li></ul></ul> <p><a href="http://code.google.com/apis/chart/#label_options" target="_blank">Styles</a> <u>können auch definiert werden:</u></p> <p><a href="{{BASE_PATH}}/assets/wp-images/image247.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="416" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb226.png" width="334" border="0"></a> </p> <ul> <li><a href="http://code.google.com/apis/chart/#bar_width">Bar width and spacing</a>  <li><a href="http://code.google.com/apis/chart/#line_styles">Line styles</a>  <li><a href="http://code.google.com/apis/chart/#grid">Grid lines</a>  <li><a href="http://code.google.com/apis/chart/#shape_markers">Shape markers</a>  <li><a href="http://code.google.com/apis/chart/#hor_line_marker">Horizontal range markers</a>  <li><a href="http://code.google.com/apis/chart/#vert_line_marker">Vertical range markers</a>  <li><a href="http://code.google.com/apis/chart/#fill_area_marker">Fill area markers</a></li></ul> <p><strong>Sieht schick aus - machen wir doch mal ein Beispiele</strong></p> <ul> <li>Beispiel Pie  <ul> <li><a href="http://chart.apis.google.com/chart?cht=p3&amp;chd=s:UUKY&amp;chs=250x100&amp;chl=Hello|World|Code|Inside" target="_blank">Live Beispiel</a>  <li>Beschreibung:  <ul> <li>http://chart.apis.google.com/chart?cht=p3&amp;&nbsp; : <strong>Chart Type</strong> - 3D Pie  <li>chd=s:UUKY&amp; : <strong>Chart Data in simple Encoding</strong> - U (2*) steht für 20, K für 10 und Y für 50 macht insgesamt 100% - siehe die <a href="http://code.google.com/apis/chart/#simple_values" target="_blank">Encoding Tabelle</a>  <li>chs=250x100&amp; : <strong>Chart Größe</strong> in Pixel - 250 * 100 Pixel  <li>chl=Hello|World|Code|Inside : Chart Pie Legende, dabei werden die Werte nacheinander auf die Chart Data entsprechend gemappt (Hello=U, World = U, Code = 10, Inside = Y)</li></ul></li></ul></li></ul> <p><a href="{{BASE_PATH}}/assets/wp-images/image248.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="105" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb227.png" width="244" border="0"></a> </p> <p><strong>Fazit</strong></p> <p></p> <div class="wlWriterSmartContent" id="scid:605EEA63-B54B-4e6d-A290-F5E9E8229FC1:385c643c-778a-427f-abbb-c96009876607" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px"></div> <div class="wlWriterSmartContent" id="scid:605EEA63-B54B-4e6d-A290-F5E9E8229FC1:ae23379b-be42-4965-a7fe-a3a6d918c8c2" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px"></div>Das obere Beispiel von mir war recht einfach gestrickt. Wenn man die Google Beispiele auf der API Seite anschaut, wird es doch etwas schwieriger. Leider hat Google nur die Möglichkeit geboten, die Bilder über GET Requests zu erstellen. Daher muss man alles über die komplexen URL Anfragen lösen - sicherlich für kleine Sachen eine gute Lösung, für größere wird es aber leicht anstrengend. <p></p> <p>Für einen kostenlosen Dienst und den schicken Typen und den vielen Möglichkeiten, ist es aber doch recht schick gelungen - auch wenn das Datenschutzproblem in "wichtigen" Anwendungen am Ende nicht ganz aus dem Auge verloren werden sollte.</p>
