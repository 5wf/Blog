---
layout: post
title: "VSone - Tag 2 - WCF, SQL Server Compact Edition, System.AddIn, ADO.NET Entity Framework, ADO.NET Data Services (&quot;Astoria&quot;)"
date: 2008-02-17 18:38
author: robert.muehsig
comments: true
categories: [Allgemein]
tags: ["Astoria", ADO.NET Data Services, ADO.NET Entity Framework, ASP.NET 3.5 Extensions, SQL Server Compact Edition, System.AddIn, WCF]
---
{% include JB/setup %}
<p>Wenn auch verspätet, hier die Details vom 2. Tag:</p> <p>Am zweiten Tag der <a href="http://www.vsone.de/">VSone</a> ging es gleich wieder mit interessierten Vorträgen weiter.</p> <p><strong>Der erste Vortrag: Datenübertragung mit WCF</strong></p> <p>Hier ging es um die <a href="http://de.wikipedia.org/wiki/Windows_Communication_Foundation">Windows Communication Foundation</a>&nbsp; - bekannt aus <a href="http://de.wikipedia.org/wiki/.NET#.NET_3.0_und_Vista">.NET 3.0</a>. Zwar war das Thema jetzt nicht unbedingt neu, jedoch habe ich persönlich mit WCF noch sehr wenig (wahrscheinlich zu wenig) Kontakt gehabt. Jürgen Kotz ging intensiv auf die Serialisation der Daten ein - was der Unterschied zwischen den "<a href="http://msdn2.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx">DataContractSerializer</a>", "<a href="http://msdn2.microsoft.com/de-de/library/system.xml.serialization.xmlserializer(VS.80).aspx">XmlSerializer</a>" und dem "<a href="http://msdn2.microsoft.com/en-us/library/system.runtime.serialization.netdatacontractserializer.aspx">NetDataContractSerializer</a>" ist und warum der letzte eher ungeliebt ist. <br>Interessant fand ich die Möglichkeiten der "Vorwärtskompatibilität" oder Roundtripping von Services mit einem einfachen Trick: Das <a href="http://msdn2.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.extensiondata.aspx">IExtensible Interface</a> deckt solch einen (sehr wahrscheinlichen Fall) ab. Auch Versionierung mit dem Order Attribut wurde gezeigt.</p> <p>Tools die nett sind: <a href="http://msdn2.microsoft.com/en-us/library/aa347733.aspx">SvcUtil</a> und der <a href="http://msdn2.microsoft.com/en-us/library/ms732009.aspx">WCFConfigEditor</a>.</p> <p><strong>Zweiter Vortrag: SQL Server Compact Edition</strong></p> <p>Ein recht kurzer, aber sehr gut gemachter Vortrag von Senaj Lelic. Hier drehte sich alles um den SQL Server in seiner kleinsten Ausführung: Der "<a href="http://www.microsoft.com/sql/editions/compact/default.mspx">Compact Edition</a>". Wenn jemand mal eine (offline) Desktopanwendung geschrieben hat, kennt das Problem, dass irgendwo die Daten gespeichert werden müssen. Xml ist unsicher (jeder kann die Datei editieren) und irgendwie ist das alles nicht so ganz fein. Einen SQL Server ist allerdings zu fett - man will niemanden zumuten erstmal einen kompletten (selbst in der Express Version) Server zu installieren. Genau hierfür ist die Compact Edition gedacht. <br>Eingebaute Features: </p> <p>- Kann mit dem Management Studio verwaltet werden<br>- "fühlt" sich wie ein großer SQL Server an (SQL, Transaktionen, Verschlüsselung)<br>- Lizenzfrei (und das bei einem MS Produkt!)<br>- Einfachstes Deployment: MSI, ClickOne oder man kann die ca. 7 DLLs aus denen die Compact Edition besteht auch einfach in sein Output Directory kopieren und die Anwendung läuft!<br>- Speichergröße: 2MB und Arbeitsspeicherverbrauch: 5MB!<br>- Datenbankgröße bis zu 4 GB<br>- Sync Framework ist integriert<br>- Seit .NET 3.5 soll es LINQ Support geben (das will ich allerdings erstmal selber ausprobieren ;) )</p> <p>Ich denke ich werde mal eine nette WPF Applikation mit dem dem SQL Server Compact Edition zusammen bauen ;)</p> <p><strong>Dritter Vortrag: System.AddIn</strong></p> <p>Wer schon immer mal eine Plugin/Addin Möglichkeit in seiner Applikation einbauen wollte, der sollte <a href="http://msdn.microsoft.com/msdnmag/issues/07/02/CLRInsideOut/Default.aspx?loc=de">System.AddIn</a> mal näher anschauen. <a href="http://blogs.thinktecture.com/cnagel/">Christian Nagel</a> hat dieses doch recht komplexe Thema gut erklärt - auch wenn ich zeitweise bei den ganzen Contracts, Interfaces und Views nicht durchgesehen habe, wurde es am Ende ein klares Bild. Der <a href="http://blogs.msdn.com/dparys/archive/2008/01/11/system-addin-pipeline-builder-how-to-video-uncut-version.aspx">Pipeline Builder</a> ist eine große Hilfe.<br>Ein schickes Beispiel am Ende war folgendes: Wir haben eine WPF Anwendung, welches als Host dient, und wollen nun über ein AddIn die Oberfläche mit irgendeinen WPF User Control erweitern. Das AddIn beinhaltete nur das User Control und man konnte es direkt in die Host Anwendung integrieren - ohne das direkte Referenzen darauf liefen - das AddIn lief sogar in einer anderen AppDomain. .NET Remoting macht es möglich. </p> <p><strong>Nächster Vortrag: ADO.NET Entity Framework</strong></p> <p>Anschließend an den LINQ to SQL Vortrag, ging es heute um den großen Bruder - auch wieder von <a href="http://chrison.net/">Christoph Wille</a>. Das <a href="http://msdn2.microsoft.com/en-us/library/aa697427(VS.80).aspx">ADO.NET Entity Framework</a> unterscheidet sich zum Teil gravierend von <a href="http://msdn2.microsoft.com/en-us/library/bb425822.aspx">LINQ to SQL</a> - die Unterschiede waren mir erst nicht ganz klar. Ich will es mal versuchen zu Erklären: Bei LINQ to SQL baut man seine komplette Datenbank einfach in Business Objekte um - das wird meistens so gemacht und klappt auch wunderbar (jedenfalls mit MS SQL). Das ADO.NET EF geht eher Objektgetrieben ran - wer mit seinen Business Objekten mehr machen will (Vererbung, Verschachteln etc.) ist hier wesentlich flexibler. <br>Infos gibts auf den Blog von <a href="http://mtaulty.com/communityserver/blogs/mike_taultys_blog/default.aspx">Mike Taulty</a> oder auch im <a href="http://www.code-magazine.com/article.aspx?quickid=0711051">CoDe Magazine</a> (dort müsste noch mehr sein - ich habs auf die schnelle leider nicht gefunden). Auch interessant sind die <a href="http://www.codeplex.com/adonetsamples/">ADO.NET Samples auf Codeplex</a>.</p> <p>Wer das ADO.NET Entity Framework testen will, benötigt die <a href="http://www.asp.net/downloads/3.5-extensions/">ASP.NET 3.5 Extensions</a> (da es momentan beta ist und in einem rutsch mit den Extensions kam) und natürlich den Designer.</p> <p>Das ADO.NET Entity Framework ist <u>herstellerunabhängig</u> - jeder kann einen Provider dazu schreiben. </p> <p>Insbesondere das <a href="http://msdn2.microsoft.com/en-us/library/aa697428(VS.80).aspx">Entity Data Modell</a> wurde anschaulich erklärt - was <a href="http://blogs.msdn.com/adonet/archive/2008/01/11/annotations-in-csdl.aspx">CSDL</a>, <a href="http://codebetter.com/blogs/john.papa/archive/2007/04/03/Entity-Framework_3A00_-CSDL_2C00_-MSL-and-SSDL-Schemas.aspx">MSL</a> und <a href="http://msdn2.microsoft.com/en-us/library/bb399559.aspx">SSDL</a> ist. Im Grund ein Mapping (MSL) zwischen Objekten (CSDL) und Strukturen (SSDL).</p> <p>Insgesamt wird das ADO.NET Entity Framework später sicherlich für viele Enterprise Applikationen eine interessante Option sein - LINQ to SQL wird deswegen aber nicht begraben. Da beides LINQ benutzt wäre sogar eine Migration später möglich - auch wenn man einige Methoden ändern müsste, weil LINQ to SQL z.B. ein DataContext benutzt und ADO.NET EF einen ObjectContext.</p> <p>Wer jetzt etwas verwirrt ist, der sollte sich diese Seite anschauen: <a href="http://msdn2.microsoft.com/en-us/library/cc161164.aspx">LINQ to Relational Data</a></p> <p><strong>Letzter Vortrag: ADO.NET Data Services ("Astoria")</strong></p> <p>Der letzte Vortrag auf der VSone - wieder mit <a href="http://chrison.net/">Christoph Wille</a>. Die ADO.NET Data&nbsp; Services liegen ebenfalls mit bei den <a href="http://www.asp.net/downloads/3.5-extensions/">ASP.NET 3.5 Extensions</a> dabei - nur hab ich sie noch nie benutzt. </p> <p>Stellen wir uns vor: Wir haben unsere Datenbank schon komplett als LINQ to SQL (oder ADO.NET EF) Framework im Code verfügbar. Jetzt wollen wir diese Daten über <a href="http://de.wikipedia.org/wiki/Representational_State_Transfer">REST</a> (man spielt man eigentlich die ganze Zeit mit der URI rum) in AJAX, Silerlight oder anderen Clientanwendung verfügbar machen. Für ASP.NET AJAX Anwendungen müsste man in einem solchen Fall sehr viele Webservices schreiben. Mit "<a href="http://astoria.mslivelabs.com/">Astoria</a>" geht das Out-of-the-box!</p> <p>Man setzt einen <a href="http://codebetter.com/blogs/david.hayden/archive/2008/01/08/getting-started-with-ado-net-data-services.aspx">ADO.NET Data Services</a> auf und sagt welche Datenquelle genommen werden soll (unsere DataContext von LINQ to SQL z.B.) und legt dann noch fest, welche Tabellen frei zugänglich sein müssen. Wenn man dies ausführt wird ein WCF Service gestartet, der über die URI die jeweiligen Daten rausgibt:</p> <p><a href="http://meinTollerServer.de/Customers">http://meinTollerServer.de/Customers</a> würde z.B. alle Customers anzeigen als <a href="http://de.wikipedia.org/wiki/Atom_(Format)">XML (ATOM Format)</a> oder <a href="http://de.wikipedia.org/wiki/JSON">JSON</a>.<br><a href="http://meinTollerServer.de/Customers(1">http://meinTollerServer.de/Customers(1</a>) würde nur den Customer mit dem Primary Key "1" wiedergeben</p> <p>Filterung, Sortierung und viele andere Optionen stehen auch noch zur Verfügung.</p> <p>Das ganze geht mit "Astoria" - Daten löschen, ändern und erstellen geht natürlich ähnlich. </p> <p>Sehr interessanter Ansatz um schnell die Daten zu verteilen ohne große Webservices zu generieren - zur Mix gibts neues! <br>In Desktopanwendungen kann man übrigends diese "URI" Abfrage mithilfe von LINQ zusammenbauen.</p> <p><strong>Fazit von der VSone</strong></p> <p>Eine sehr tolle Veranstaltung, welche eigentlich alle Gebiete (von Administratoren, Projektleitern oder Entwicklern) abdeckt - der Entwickler Track war sehr informativ und hatte viele Neuerungen gezeigt. Es hat sich also gelohnt :)</p>
