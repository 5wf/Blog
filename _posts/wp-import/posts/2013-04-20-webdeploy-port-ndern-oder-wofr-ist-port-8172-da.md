---
layout: post
title: "WebDeploy Port ändern oder wofür ist Port 8172 da?"
date: 2013-04-20 22:19
author: robert.muehsig
comments: true
categories: [HowTo]
tags: [IIS, WebDeploy]
---
{% include JB/setup %}
<p>Wer WebDeploy auf einem Server Betriebssystem nutzt, der geht im Standardfall über den Port 8172. Aber wofür ist der Port eigentlich da und wie kann ich den ändern?</p> <p><em>Hinweis: Für die WebDeploy Installieren empfehle ich </em><a href="{{BASE_PATH}}/2012/11/06/setup-iis-8-fr-asp-net-webdeploy-auf-windows-8-und-windows-server-2012/"><em>diesen</em></a><em> und </em><a href="{{BASE_PATH}}/2012/10/15/web-deploy-per-webpi-installiert-und-iis-management-service-nicht-vorhanden/"><em>diesen</em></a><em> Blogpost.</em>&nbsp; </p> <p><strong>Port 8172 = IIS Management Service Default Port</strong></p> <p>Der Port 8172 ist der Standard-Port des IIS Management Services, welchen es auch nur für Server Betriebssysteme gibt (also keine Sorge wenn ihr ihn im IIS unter Windows 7/8 nicht findet).</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1825.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb978.png" width="376" height="410"></a></p> <p>Über die GUI (und sicher auch über die Powershell) kann man diese Einstellungen ändern wenn der Dienst gerade nicht läuft.</p> <p>Das war es eigentlich schon. </p> <p><strong>Hintergrund-Info: WebDeploy &amp; Web Management Service Handler</strong></p> <p>Weiter oben habe ich schon geschrieben das der Web Management Service nur auf Server Betriebssystemen zum Einsatz kommt – wie funktioniert dann aber WebDeploy auf meinem lokalen IIS?</p> <p>Auf dem Blog von <a href="http://blog.richardszalay.com/">Richard Szalay</a> habe ich <a href="http://blog.richardszalay.com/2013/02/02/building-a-deployment-pipeline-with-msdeploy-part-4-server-configuration/">eine tolle Zusammenfassung über WebDeploys “Deployment Modelle” gefunden</a>:</p> <ol> <ol> <li><em><strong>Web</strong> <strong>Management Service (WMSvc) handler</strong><br>This is the preferred method for IIS 7+ / Windows Server 2008+ and supports non-administrator deployments. It piggybacks on the WMSvc (ie. remote IIS management) by registering a custom handler (</em><a href="http://server:8172/msdeploy.axd"><em>http://server:8172/msdeploy.axd</em></a><em>). Making use of WMSvc also means that this method is not available to Windows client versions (including 7 and 8), as WMSvc is not available on those platforms. At the command line, this method is specified on the dest provider as “,computerName=http://server:8172/msdeploy.axd?site=iis-site-name”<br></em> <li><em><strong>Web Deploy Agent Service</strong><br>This is the only choice for IIS6 / Server 2003, is not installed by default, and requires the deployment user to be an administrator. At the comment line, this method is specified as “,computerName=server“ </em> <li><em><strong>“On Demand” Agent Service (temp agent)<br></strong>This choice installs the agent service temporarily for a single deployment. Useful when you have administrator credentials but aren’t able to remotely install the handler or agent service. At the command line, this method is specified as“,computerName=server,tempAgent=true”</em></li></ol></ol> <p>&nbsp;</p> <p>WebDeploy auf dem Server selbst funktioniert immer im Zusammenspiel mit dem Web Management Service – ändert man den Port des WMSvc Handlers, ändert man den Port für WebDeploy.</p> <p><strong>Hintergrund-Info: Wo werden diese Einstellungen eigentlich gespeichert?</strong></p> <p>Ein paar dieser <a href="http://www.iis.net/learn/manage/remote-administration/remote-administration-for-iis-manager">Settings (wie z.B. den Port) habe ich in der Registry</a> wiedergefunden:</p> <p>Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WebManagement\Server</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1826.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb979.png" width="458" height="275"></a> </p> <p>Andere Settings stehen in der <a href="http://www.iis.net/configreference/system.webserver/management">administration.config </a>(unter C:\Windows\System32\inetsrv\config)</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1827.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb980.png" width="240" height="133"></a> </p> <p><strong>TL;DR:</strong></p> <p>Auf einem Server im IIS Manager auf Management Service gehen und da den Port ändern. WebDeploy nutzt den Management Service für das Deployment – wobei der Management Service auch zur “Remote-Verwaltung” dient.</p>
