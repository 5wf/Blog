---
layout: post
title: "Willkommen TypeScript – es grüßt Javascript, Dart, CoffeeScript und die Webgemeinde"
date: 2012-10-03 23:00
author: robert.muehsig
comments: true
categories: [Allgemein]
tags: [CoffeeScript, Dart, TypeScript]
---
{% include JB/setup %}
<p>Die TypeScript Preview – Microsofts “Erweiterung” für Javascript Entwicklung - ist seit wenigen Tagen veröffentlicht. Wie so vielen anderen hab ich zuerst an Dart oder Coffeescript gedacht - und das nicht gerade in einem positiven Sinn. Microsofts letzten großen Erfolge im Webclient Bereich sind (gefühlt) schon eine Weile her: Prominentestes Negativ-Beispiel ist Silverlight, aber auch mit den ASP.NET AJAX Toolkit hatten sich die Microsoftis nicht mit Ruhm bekleckert. </p> <p><strong>Ganz kurz: Was ist TypeScript?</strong></p> <p>TypeScript ist eine typisierte Form von Javascript, welche einen eigenen Compiler mitbringt und den Code direkt in Javascript umwandelt, sodass er überall lauffähig ist. Keine neue VM, kein “das soll Javascript ablösen” – nur etwas womit man Javascript Code produzieren kann.</p> <p><strong>Was gibts es für offizielle Quellen und wo finde ich einen ersten Einstieg?</strong></p> <p>Es gibt fast alles auf der <a href="http://www.typescriptlang.org/">offiziellen Website</a> zum Nachlesen. Bekannt und empfehlenswert ist natürlich auch das “<a href="http://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript">Introducing TypeScript</a>” von Anders Hejlsberg (BTW: er ist einer der C# Väter) – in den ersten Minuten erklärt er wozu TypeScript gut ist und was es genau ist. <br>Ein <a href="http://www.amazedsaint.com/2012/10/microsoft-typescript-and-quick.html">kleines Tutorial habe ich hier</a> gefunden – ich denke im Laufe der nächsten Tage werden dutzende “So sieht TypeScript aus”-Blogposts entstehen. </p> <p><strong>Wie sieht das Tooling aus? </strong></p> <p>Für Visual Studio 2012 Entwickler gibt es das Plugin, neben den Source Code und der Anleitung für Node.js Entwickler <a href="http://www.typescriptlang.org/#Download">direkt auf der TypeScript Seite</a>. Das <a href="http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6">“Web Essentials” Plugin</a> von Visual Studio hat sogar bereits ein “Split”-Screen für TypeScript und die Umwandlung zu Javascript implementiert.</p> <p>Von der Microsoft Open Source Truppe gibt es zudem noch <a href="http://blogs.msdn.com/b/interoperability/archive/2012/10/01/sublime-text-vi-emacs-typescript-enabled.aspx">TypeScript Syntax Support für Sublime Text, Emacs und Vim</a>.</p> <p><strong>Wozu soll TypeScript gut sein?</strong></p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1596.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb757.png" width="484" height="298"></a> </p> <p><em> (</em><a href="http://www.flickr.com/photos/nathansmith/4704268314/sizes/z/in/photostream/"><em>Bild Quelle</em></a><em>)</em></p> <p>Javascript hat große Stärken: Es läuft in jedem Browser, auf jedem OS. Allerdings hat die Sprache seine Tücken. Jetzt kommt es noch darauf an welche Erfahrung der Entwickler mitbringt: Kommt der Entwickler aus der Java oder C# Welt wird er schnell Klassen, Module und Namespaces &amp; co. vermissen. Andere wiederum haben noch nie das verlangen nach Klassen und starker Typisierung gehabt. Hier sieht man schon: Auf einen nenner zu kommen wird schwierig.</p> <p>Erklärtes Ziel von Microsoft: TypeScript soll es erleichtern große Javascript Applikationen zu erstellen.</p> <p>Empfehlenswert für diese Frage ist auch der <a href="http://www.hanselman.com/blog/WhyDoesTypeScriptHaveToBeTheAnswerToAnything.aspx">Blogpost von Scott Hanselman</a> (und die Kommentare).</p> <p><strong>Was ist der Unterschied zu normalen Javascript?</strong></p> <p>Größter Unterschied ist, dass man in TypeScript Klassen und Schnittstellen beschreiben kann. Ein <a href="http://www.typescriptlang.org/Samples/">Blick auf die Beispiele</a> schadet hier nicht. Bei den Beispielen ist allerdings auch viel “normaler” Javascript Code zu sehen, welcher mit TypeScript noch erweitert wurde. Dies ist eines der Hauptfeatures von TypeScript.</p> <p><strong>Was ist der Unterschied zu CoffeeScript?</strong></p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1597.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb758.png" width="240" height="64"></a> </p> <p><a href="http://coffeescript.org/">CoffeeScript</a> hat einen speziellen Syntax, der mehr an Ruby als an die C-Sprachen angelehnt ist. Zudem kann man in CoffeeScript selber kein “normales” Javascript benutzen – dies geht allerdings mit TypeScript. Jeder Javascript Code ist schon TypeScript, d.h. man kann bestimmte Features von TypeScript nutzen und trotzdem keinen “Bruch” riskieren.</p> <p><strong>Was ist der Unterschied zu Dart? Es gibt sogar Feedback vom Google Dart Team!</strong></p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1598.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; margin: 0px; border-left: 0px; display: inline" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb759.png" width="164" height="62"></a> <a href="http://www.dartlang.org/">Dart</a> ist vom Syntax her näher an TypeScript dran – die Verwandtschaft zu Java &amp; co. sieht man der Sprache durchaus an. Auch hier ist Typisierung eines der Hauptelemente. Allerdings verfolgt Dart einen radikaleren Ansatz als TypeScript:</p> <p>Dart ist nicht nur “Syntax”, sondern bringt auch eine eigene VM mit – kann den Code allerdings auch zu Javascript umwandeln. In Dart selber kann man kein Javascript Code nutzen.</p> <p>Auf <a href="http://www.reddit.com/r/programming/comments/10rkd9/welcome_to_typescript/c6g37xd">Reddit</a> hat sich sogar ein Google Dart Team Mitglied zu TypeScript geäußert:</p> <p><em>I'm on Google's Dart team, so I'm naturally looking at it from that angle/bias. Here's some random stuff that caught my eye, mostly comparing it to Dart. I've only spent a few minutes skimming, so don't take any of this too seriously...</em> <p><strong><em>No generics</em></strong> <p><em>I guess some types are better than no types at all, but it's really rough to lose those. TypeScript does have built-in array types and object types cover some of the "map" type use cases. But not being able to define your own generic types is a drag.</em> <p><em>The docs say when added, generics will work using type erasure, which is what I'd expect given it's "compile to lightweight JS" style, but that can be a pain too. It's nice to be able to do stuff with your type arguments at runtime sometimes.</em> <p><strong><em>All types are nullable</em></strong> <p><em>Dart is the same way. Makes me sad in both cases.</em> <p><strong><em>The type annotation syntax is nice</em></strong> <p><em>Almost every language with optional type annotations (ML, Scala, F#, Kotlin, etc.) goes with "postfix after a <code>:</code>. Dart tries to use C-style type annotations which causes some nasty corner cases. I like what TypeScript has here, especially the syntax for function types:</em></p><pre><code><em>function takeCallback(callback : (n : number) =&gt; number) { ... }
</em></code></pre>
<p><strong><em>Interfaces are structurally typed, classes are nominally typed</em></strong>
<p><em>Makes sense given that it's JavaScript, but it seems pretty neat. Being able to implicitly implement an interface is nice. But TypeScript doesn't seem to let you go the other way: given a class, you can't make a new type that's compatible with it without concretely extending it because of the brand stuff.</em>
<p><em>In Dart, thanks to implicit interfaces, you can.</em>
<p><strong><em>Best common type can fail</em></strong>
<p><em>That means this is a type error:</em></p><pre><code><em>[1, true]
</em></code></pre>
<p><strong><em>You can overload in interfaces by parameter signature</em></strong>
<p><em>This is really cool because it gives you a way have more precise type inference flow through a function call that does some dynamic type switching. For example:</em>
<p><em>interface Doubler { double(s : string) : string; double(n : number) : number; }</em>
<p><em>With this, when the compiler sees a call to <code>double</code>, it can correctly give you a precise return type based on the inferred argument type.</em>
<p><em>What I'm not sure is how to actually implement a class that implements that interface and makes the type checker happy. You can't actually overload concrete methods, and my five minute attempt to make it happy by dynamic type checking didn't seem to work.</em>
<p><strong><em>There's a dedicated syntax for array types</em></strong>
<p><em>Make sense since there's no generics. It's also nice and terse, which is good, but I personally prefer general-purpose generics over one-off special case collections.</em>
<p><strong><em>There's no implicit downcasting</em></strong>
<p><em>One of Dart's more unusual type system features is that assignment compatibility is bidirectional: you can downcast without a warning. Aside from the typical special case of assigning to/from <code>any</code> (<code>dynamic</code> in other languages), TypeScript doesn't allow that. You have to type assert.</em>
<p><em>Personally, I like TypeScript's approach here.</em>
<p><strong><em>Arrow functions and lexical <code>this</code></em></strong>
<p><em>This is just motherhood and apple pie. I like it. (Dart has this too, and <code>this</code> is always lexically bound.)</em>
<p><em>Overall, it looks pretty neat. If you want exactly the same JS semantics (good and bad) but also want a smattering of types, TypeScript seems decent. It's like Closure Compiler but with a better syntax.</em>
<p><em>If you want something that's a more aggressive step away from JS's syntax and semantics, then it seems like TypeScript isn't that.</em>
<p>Auf Reddit hat er <a href="http://www.reddit.com/r/programming/comments/10rkd9/welcome_to_typescript/c6g37xd">noch einige weitere Fragen</a> beantwortet.</p>
<p><strong>Was sagen andere zu TypeScript?</strong></p>
<p>Douglas Crockford, einer der Entwickler von Javascript), hat auf <a href="https://plus.google.com/118095276221607585885/posts/MgzNUSTwjRt">Google Plus seine Meinung</a> zu TypeScript geäußert. Er findet die TypeScript gut, vor allem da das Thema strenge Typisierung beim nächsten ECMAScript Standard (der Standard zu Javascript) berücksichtig werden soll und es so mit TypeScript es nun erstmal eine Lösung gibt. Dies nimmt etwas den Druck vom Standardisierungsprozess. Er selbst findet allerdings das dieses Feature überbewertet wird.</p>
<p><em>Microsoft's TypeScript may be the best of the many JavaScript front ends. It seems to generate the most attractive code. And I think it should take pressure off of the ECMAScript Standard for new features like type declarations and classes. Anders has shown that these can be provided nicely by a preprocessor, so there is no need to change the underlying language.<br>I think that JavaScript's loose typing is one of its best features and that type checking is way overrated. TypeScript adds sweetness, but at a price. It is not a price I am willing to pay.</em>
<p>Auch <a href="http://tirania.org/blog/archive/2012/Oct-01.html">Miguel de Icaza (Schöpfer hinter Mono) hat seine ersten Impressionen gebloggt</a>. Größter Kritikpunkt: Aktuell ist alles sehr auf die Microsoft Software ausgeleget. Auch wenn alles Open Source ist, werden es erst Leute wirklich benutzen und erweitern wenn bereits deutlich mehr Arbeit in das Tooling auf andere Plattformen geflossen ist.</p>
<p><strong>Und wie steh ich jetzt dazu? Das Beste seit geschnitten Brot oder doch eine neue Silverlight-like-Apokalypse?</strong></p>
<p><a href="{{BASE_PATH}}/assets/wp-images/image1599.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; margin: 0px 10px 0px 0px; border-left: 0px; display: inline" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb760.png" width="160" height="240"></a>Ich hab bisher noch keine Zeit gehabt ernsthaft irgendwas damit zu machen, allerdings ist es am Ende nur <strong>ein weiteres Tool was Javascript Code produziert</strong>. <strong>Es soll nicht Javascript ablösen</strong>. Sowohl die Idee als auch vom Tooling her <strong>richtet sich stark an C# Entwickler</strong> – <strong><u>und das ist OK</u></strong>. Evtl. wird es eines der Tools sein, die man nur im Microsoft Lager kennt, vielleicht aber auch nicht. <br>Wie bei allen Compilern gilt allerdings: Man muss den kompilierten Code mögen – das trifft aber auch auf Dart und Coffeescript zu. Die scheinbar einfache Integration von bestehenden Javascript Code ist allerdings ein nettes Feature – eines was mich bislang immer von CoffeeScript und Dart abgeschreckt hatte (Motto: Ganz oder gar nicht.) – auch wenn man den generierten Javascript Code vom normalen Javascript aufrufen kann. </p>
<p>Wie immer gilt: Nimm das Tool was für dich passt. </p>
