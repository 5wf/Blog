---
layout: post
title: "#region == Failcode"
date: 2010-09-08 22:38
author: robert.muehsig
comments: true
categories: [HowToCode]
tags: [Fail, FailCode, region, Style]
---
<p><a href="{{BASE_PATH}}/assets/wp-images/image1048.png"><img style="border-bottom: 0px; border-left: 0px; margin: 0px 10px 0px 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb230.png" width="191" height="191" /></a> </p>  <p>Das Thema ist wahrscheinlich schon ewig alt, aber durch einen übermotivierten Kollegen, der überall "regions” in den Code reingeballert hat, kam das Thema bei uns wieder auf: Sind #regions gut oder schlecht? Für alle die nicht wissen worum es geht: <a href="http://msdn.microsoft.com/en-us/library/9a1ybwek(VS.71).aspx">#region auf MSDN</a></p>  <p>&#160;</p>  <p>&#160;</p> <!--more-->  <p><strong>Schauen wir uns mal ein Beispiel an...</strong></p>  <p>Ich mach die User.cs auf und sehe das:</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1049.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb231.png" width="142" height="203" /></a> </p>  <p>Wobei "...” für diverse andere Sachen noch stehen kann. </p>  <p><strong>Der erste Eindruck:</strong></p>  <p>Ist ja aufgeräumt. </p>  <p><strong>Aber jetzt mal ehrlich...</strong></p>  <p>Mich interessiert der Code, nicht irgendwelche Blöcke. Mit #region versteckt man den Code doch nur. Wenn ich in die User.cs reinschaue, möchte ich auch den Code auf den ersten Blick sehen. Ja, es gibt ein Tastenkürzel um alles aufzublenden. Aber wozu überhaupt diese #region Blöcke?</p>  <p><strong>Code Smell</strong></p>  <p>Häufig habe ich #regions in Klassen gefunden, welche etliche hundert Zeilen lang waren. Durch die #regions sollte der Code etwas strukturierter werden. </p>  <p>Man schaut z.B. in eine Methode und erblickt folgendes:</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1050.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb232.png" width="178" height="114" /></a> </p>  <p>Mir geht es dann meisten so, dass ich ja trotzdem den Code sehen will. Also mal reinklicken:</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1051.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb233.png" width="181" height="211" /></a> </p>  <p>Spannend. Nagut... was ist denn bei Y los?</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1052.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb234.png" width="193" height="310" /></a> </p>  <p>Alle guten Dinge sind drei. Was steht hinter Z?</p>  <p><a href="{{BASE_PATH}}/assets/wp-images/image1053.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb235.png" width="202" height="346" /></a> </p>  <p>Super, oder? Der Code ist natürlich hier in meinem Beispiel Blödsinn, aber hinter X, Y und Z können sich kilometerlange Codeblöcke verstecken. </p>  <p><strong>Warum ich #regions für missverstandenen Ordnungssinn halte:</strong></p>  <p>IMHO bringen sie keine wirklichen Vorteile mit sich. Auf dem ersten Blick sieht es nett aus, aber am Ende könnte man auch folgende Schluss daraus ziehen:</p>  <p>Die Klasse hat zu viele Aufgaben und muss deswegen optisch etwas aufgehübscht werden. <strong>Besser:</strong> Aufsplitten! Und damit meine ich nicht in "Partial Classes”, sondern in getrennte Funktionseinheiten.</p>  <p><strong>Interface Implementierungen</strong></p>  <p>Ein anderes Beispiel: Visual Studio macht Interface Implementierungen grundsätzlich in #regions. Schön finde ich es nicht (und man kann es auch abstellen ;) ). Trägt es wirklich zur Strukturierung bei? IMHO kaschiert das #regions, für einen besseren Überblick gibt es spätestens seit VS2010 auch andere nette Tools - da brauch ich keine #regions.</p>  <p><strong>Zudem...</strong></p>  <p>Wenn man "On-the-fly” (z.B. in TDD Manier) Code erstellt, dann packt Visual Studio den Code auch irgendwo hin. Damit ist das System mit den #regions auch zum Scheitern verurteilt.</p>  <p><strong>Weitere Anti-#region Posts</strong></p>  <p>In <a href="http://www.gmbsg.com/region-kann-bose-sein/">diesem Post</a> ist auch ähnlich beschrieben, warum er #regions nicht mag. Hier noch weitere:</p>  <ul>   <li><a href="http://weblogs.asp.net/bsimser/archive/2007/10/30/regions-evil.aspx">Regions == Evil</a></li>    <li><a title="http://blog.jayfields.com/2005/05/do-you-region.html" href="http://blog.jayfields.com/2005/05/do-you-region.html">Do you #region?</a></li>    <li><a title="http://www.evilrob.org/journal/archives/2006/08/09/c-regions-consi.html" href="http://www.evilrob.org/journal/archives/2006/08/09/c-regions-consi.html">C# Regions Considered Harmful</a></li>    <li><a href="http://kyle.baley.org/RegionsOrQuotHowToDisorganizeYourCodequot.aspx">#Regions, or &quot;How to disorganize your code&quot;</a></li> </ul>
