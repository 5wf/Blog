---
layout: post
title: "HowToCode: Reverse AJAX / Http-Push / &quot;Comet&quot; - Kann der Server Clients aktiv infomieren?"
date: 2009-10-21 22:03
author: Robert Muehsig
comments: true
categories: [HowToCode]
tags: [AJAX, ASP.NET, Comet, HowToCode, Http]
language: de
---
{% include JB/setup %}
<p><a href="{{BASE_PATH}}/assets/wp-images-de/image847.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="101" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb32.png" width="125" align="left" border="0"></a>Durch eine Problemstellung bei Kollegen bin ich auf ein interessantes Thema gestoßen: <a href="http://en.wikipedia.org/wiki/Reverse_Ajax">HTTP Push/Reverse Ajax</a>. Bei einem normalen Einsatz von <a href="http://en.wikipedia.org/wiki/Ajax_(programming)">AJAX</a> schickt der Client (Browser) einen Request zum Server und dieser Antwortet - asynchron natürlich. Doch gibt es eine Möglichkeit dass auch der Server den Client informiert - ohne <a href="http://de.wikipedia.org/wiki/Polling_(Informatik)">Polling</a>? Hat jemand bereits in diesem Gebiet (mit .NET "Integration" ) Erfahrung gesammelt?</p><p><strong>HTTP - Request &amp; Response</strong></p> <p>Die Kommunikation über HTTP geht nur, wenn ein Client einen Request zum Server sendet. Dieser schickt daraufhin eine Response. Bei AJAX passiert dies ganze asynchron. In bestimmten Szenarien ist es aber wichtig, dass die Clients quasi in Real Time benachrichtig werden. </p> <p><strong><a href="{{BASE_PATH}}/assets/wp-images-de/image848.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="211" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb33.png" width="143" align="left" border="0"></a>Szenarien</strong></p> <p>Typisches Beispiel dafür ist z.B. eine Aktienkurs Anwendung, ein Chat oder ein Multiplayer Spiel. Google Mail / Talk / Docs oder Meebo ist dies z.B. in der Realität zu sehen.</p> <p><strong>Das Problem bei normalen AJAX</strong>&nbsp;</p> <p>Durch die Natur von HTTP muss die Kommunikation vom Client aus erfolgen, d.h. im einfachsten Fall macht man vom Client aus ein Polling am Server - das ist allerdings alles andere als nett für den Server (Skalierbarkeit) und zudem hat man da wieder eine bestimmte Wartezeit (je nachdem wieoft gepollt wird).</p> <p><strong>"Comet" </strong></p> <p>"<a href="http://en.wikipedia.org/wiki/Comet_(programming)">Comet</a>" ist im Prinzip eine Herangehensweise um durch kleine Hacks HTTP eine "Two-Way" Kommunikation zu ermöglichen. Im Grunde gibt es wohl (das basiert alles auf gesundem Halbwissen) 2 Möglichkeiten:</p> <ul> <li>"Long Polling": Client setzt einen AJAX Request ab und der Server hält die Verbindung sehr lange bis irgendein "Event" eintritt. Dann antwortet der Server und der Client bekommt das Ergebnis. Danach wird sofort wieder ein neuer AJAX Request gemacht und das Spiel beginnt von vorn.  <li>"Streaming": Hierbei wird ständig eine Verbindung offen gehalten... mehr gibt leider mein Halbwissen nicht mehr her ;) </li></ul> <p>Der Vorteil bei beiden Varianten ist, dass man nicht ständig den Server fragt, was es neues gibt, sondern man hat eine Art "Events".</p> <p><strong>Zukunft: HTML5</strong></p> <p>In HTML5 Macher grübeln auch über diese Anwendungsfälle. Mittels WebSockets soll sowas mal möglich sein - ist aber wie gesagt Zukunft. Hier ein netter Artikel über <a href="http://www.infoq.com/news/2008/12/websockets-vs-comet-ajax">HTML5 WebSockets vs. Comet</a></p> <p><strong>Alternativ: Flash?</strong></p> <p>Flash soll wohl auch Socket-Programmierung erlauben. Damit könnte man ebenfalls solch eine Kommunikation machen.</p> <p><strong>Skalierbarkeit</strong></p> <p>Bei beiden Varianten muss der Client eine Verbindung zum Webserver offen halten. Für den normalen IIS &amp; Apachen ist dies nicht gut, denn irgendwann gehen den Webservern die Threads aus. Daher werden spezielle Server benötigt. <a href="http://www.lightstreamer.com/products.htm">Lightstreamer</a> soll z.B. solch ein Server sein. Diese Server sollen speziell auf diese Sachen ausgerichtet sein und sollen auch über 10.000 Connections offenhalten können.</p> <p><strong>Erfahrungen?</strong></p> <p><a href="{{BASE_PATH}}/assets/wp-images-de/image849.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="154" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb34.png" width="124" align="left" border="0"></a>Hat bereits jemand mit diesen Techniken im Zusammenhang mit .NET Erfahrung gesammelt? Ab wann macht das "Sinn" und kann man das relativ einfach managen oder gibt es irgendwas mit dem man mal schnell rumspielen kann? :)</p> <p>&nbsp;</p> <p>&nbsp;</p> <p><strong>Weitere Informationen</strong></p> <p>Auf SlideShare habe ich einige interessante Präsentatationen zu dem Thema gefunden:</p> <p></p> <div id="__ss_2064899" style="width: 425px; text-align: left"><a title="Server Push Comet" style="display: block; margin: 12px 0px 3px; font: 14px helvetica,arial,sans-serif; text-decoration: underline" href="http://www.slideshare.net/mayflowergmbh/server-push-comet">Server Push Comet</a><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=serverpushcomet-090925044031-phpapp02&amp;rel=0&amp;stripped_title=server-push-comet" width="425" height="355" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"></embed>  <div style="font-size: 11px; padding-top: 2px; font-family: tahoma,arial; height: 26px">View more <a style="text-decoration: underline" href="http://www.slideshare.net/">documents</a> from <a style="text-decoration: underline" href="http://www.slideshare.net/mayflowergmbh">John Doe</a>.</div></div> <p></p> <p></p> <div id="__ss_163685" style="width: 425px; text-align: left"><a title="Comet for highly scalable applications" style="display: block; margin: 12px 0px 3px; font: 14px helvetica,arial,sans-serif; text-decoration: underline" href="http://www.slideshare.net/techdude/comet-for-highly-scalable-applications">Comet for highly scalable applications</a><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=comet-for-highly-scalable-applications-1194896776469582-4&amp;rel=0&amp;stripped_title=comet-for-highly-scalable-applications" width="425" height="355" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"></embed>  <div style="font-size: 11px; padding-top: 2px; font-family: tahoma,arial; height: 26px">View more <a style="text-decoration: underline" href="http://www.slideshare.net/">documents</a> from <a style="text-decoration: underline" href="http://www.slideshare.net/techdude">techdude</a>.</div></div> <p></p> <p></p> <div id="__ss_1570255" style="width: 425px; text-align: left"><a title="Server push and Comet (Rails user group Hamburg 2009-06-10)" style="display: block; margin: 12px 0px 3px; font: 14px helvetica,arial,sans-serif; text-decoration: underline" href="http://www.slideshare.net/ralphvdh/server-push-and-comet-rails-user-group-hamburg-20090610-1570255">Server push and Comet (Rails user group Hamburg 2009-06-10)</a><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=railsughamburg20090610-090611162900-phpapp02&amp;rel=0&amp;stripped_title=server-push-and-comet-rails-user-group-hamburg-20090610-1570255" width="425" height="355" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"></embed>  <div style="font-size: 11px; padding-top: 2px; font-family: tahoma,arial; height: 26px">View more <a style="text-decoration: underline" href="http://www.slideshare.net/">documents</a> from <a style="text-decoration: underline" href="http://www.slideshare.net/ralphvdh">ralphvdh</a>.</div></div> <p><strong> ASP.NET &amp; Comet</strong></p> <p>Auf meiner Suche bin ich auch auf flogende Blogposts gestoßen (und über diese auf den Lightstreamer Server) :</p> <ul> <li><a href="http://www.aaronlerch.com/blog/2007/07/08/creating-comet-applications-with-aspnet/">Creating Comet applications with ASP.NET</a></li> <li><a href="http://www.codeproject.com/KB/aspnet/CometAsync.aspx">Scalable COMET Combined with ASP.NET</a></li> <li><a href="http://neilmosafi.blogspot.com/2009/03/comet-bayeux-protocol-and-aspnet.html">COMET: The Bayeux Protocol and ASP.NET support</a></li></ul>
