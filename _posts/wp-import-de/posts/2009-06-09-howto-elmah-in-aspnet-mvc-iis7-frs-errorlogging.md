---
layout: post
title: "HowTo: Elmah in ASP.NET MVC (& IIS7) f√ºrs Errorlogging"
date: 2009-06-09 01:45
author: Robert Muehsig
comments: true
categories: [HowTo]
tags: [ASP.NET, ASP.NET MVC, Elmah, Exceptions, HowTo]
language: de
---
{% include JB/setup %}
<p><a href="{{BASE_PATH}}/assets/wp-images-de/image756.png"><img style="border-right: 0px; border-top: 0px; margin: 0px 10px 0px 0px; border-left: 0px; border-bottom: 0px" height="105" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image-thumb734.png" width="136" align="left" border="0" /></a>Ich habe bereits mehrfach &#252;ber <a href="{{BASE_PATH}}/2009/03/17/howto-health-monitoring-mit-aspnet/">Errorlogging</a> (und <a href="{{BASE_PATH}}/2009/05/08/howto-logging-mit-log4net/">Logging</a> im Allgemeinen) geschrieben, jedoch habe ich heute in einem <a href="http://asp.net/mvc">ASP.NET MVC</a> Projekt eine nette Open Source Library eingebaut: <a href="http://code.google.com/p/elmah/">ELMAH</a> - <i>Error Logging Modules and Handlers for ASP.NET.</i></p> 
<!--more-->
  <p><strong>Was kann ELMAH?</strong></p>  <p>Jeder ASP.NET Entwickler wird bereits einmal den <a href="http://en.wikipedia.org/wiki/Screens_of_death#ASP.NET">Yellow Screen of Death</a> gesehen haben:</p>  <p><a href="{{BASE_PATH}}/assets/wp-images-de/image757.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="214" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image-thumb735.png" width="244" border="0" /></a> </p>  <p>Meistens tritt es dann auf, wenn der Kunde die Webseite ansieht und man selber schwer nachvollziehen kann, was nun eigentlich der Fehler war.</p>  <p>Mit ELMAH k&#246;nnen <strong>unbehandelte Exceptions</strong> sehr leicht <strong>geloggt</strong> (als XML, in Oracle/MSSQL/... werden und die Entwickler k&#246;nnen ebenfalls <strong>benachrichtigt</strong> werden (Via Email oder Twitter ;) ).     <br />Desweiteren steht eine RSS Ansicht der Fehler zur Verf&#252;gung.</p>  <p>Scott Hanselman hat in seinem Blog auch eine <a href="http://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx">gute Zusammenfassung</a> geschrieben.</p>  <p><strong>Wie bindet man ELMAH in ASP.NET MVC ein?</strong></p>  <p>Kurz gesagt: Die DLL runterladen, die Web.config anpassen &amp; das Routing &#228;ndern. Die l&#228;ngere Version steht hier Schritt f&#252;r Schritt auch auf der Projektseite: </p>  <p><a title="http://code.google.com/p/elmah/wiki/MVC" href="http://code.google.com/p/elmah/wiki/MVC"><strong>http://code.google.com/p/elmah/wiki/MVC</strong></a></p>  <p>Wenn man es im <strong>IIS7 hosted</strong> sollte man neben den system.web Einstellungen ebenfalls die system.webServer Einstellungen editieren und dort ebenfalls die Handler &amp; Module hinzuf&#252;gen.</p>  <p><strong>HandleError Attribut</strong></p>  <p>ASP.NET MVC hat ein HandleError Attribut, welches bei einer unbehandelten Exception zum Zuge kommt. Um auch hier ELMAH zu integrieren, &#252;berschreibt man einfach die OnException Methode wie hier vorgeschlagen:</p>  <p><a href="http://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute/779961#779961">How to get ELMAH to work with ASP.NET MVC [HandleError] attribute?</a></p>  <p><strong>Ergebnis</strong></p>  <p>Nach wenigen Minuten hat man nun unter <a href="http://server/elmah.axd">http://server/elmah.axd</a> eine &#252;bersichtliche Liste der aufgetretenen Exceptions mit unz&#228;hligen weiteren M&#246;glichkeiten.</p>  <p><a href="{{BASE_PATH}}/assets/wp-images-de/image758.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="296" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image-thumb736.png" width="394" border="0" /></a> </p>  <p><strong>Download</strong></p>  <p>ELMAH kann <a href="http://code.google.com/p/elmah/downloads/list">hier runtergeladen</a> werden. Mein Beispielcode kann <a href="{{BASE_PATH}}/assets/files/democode/mvcelmah/mvcelmah.zip">hier runtergeladen</a> werden.</p>
