---
layout: post
title: "Pagespeed, Content-Encoding: gzip header und ein Proxy"
date: 2014-01-28 23:11
author: robert.muehsig
comments: true
categories: [Allgemein]
tags: [Pagespeed, Proxy]
language: de
---
{% include JB/setup %}
<p>Ich hatte heute kurz mit dem Performance Addon <strong>“</strong><a href="https://chrome.google.com/webstore/detail/pagespeed-insights-by-goo/gplegfbjlmmehdoakndmohflojccocli?hl=en"><strong>Pagespeed</strong></a><strong>”</strong> eine <a href="http://www.codeinside.eu/">Seite</a> analysiert. Die Seite läuft auf Windows Azure Website, nutzt ASP.NET und das dazugehörige Bundling Framework und ist eigentlich nur eine statische Seite.</p> <h3>Größter Kritikpunkt von Pagespeed: Kompression der Seite fehlt</h3> <p>Huh? Eigentlich bin ich davon ausgegangen, dass die Seite automatisch “ge-gzipt” wird wenn der Client “Accept-Encoding: gzip” mitschickt. Jedenfalls ist dieses Feature (soweit mir bekannt ist) immer bei Azure Websites an.</p> <p>Interessanterweise haben <a href="http://www.whatsmyip.org/http-compression-test/">andere Tools</a> mir erfolgreich vermeldet, dass meine Seite sehr wohl die Kompression aktiviert hat.</p> <h3>Was war das Problem?</h3> <p>Nachdem ich <a href="http://stackoverflow.com/questions/21398706/asp-net-pagespeed-and-the-content-encoding-header">via Stackoverflow</a> mitbekommen habe, dass bei anderen Clients das Problem nicht auftritt dämmerte es mir langsam: <strong>Der Proxy</strong>. </p> <p>In der Firma nutzen wir Microsoft´s TMG, welcher wohl die Response vom Server manipuliert. Scheinbar entfernt er aber nur den Header in dieser Schreibweise: “Content-Encoding”. Twitter.com sendet es z.B. mit “content-encoding”, welches auch auf meinem Client ankam. </p> <h3><strong>Fazit</strong></h3> <p>Performance Tests hinter einem Proxy können irreführen. Wer eine <a href="http://www.hurl.it/">Art Online “curl” sucht, der sollte mal <strong>Hurl</strong> ausprobieren</a> – da konnte ich auch ziemlich schnell erkennen dass es am internen Netz liegt und nicht an der Seite. Daher erstmal das eigene Setup hinterfragen bevor man sich wahnsinnig macht ;)</p> <p>&nbsp; <a href="{{BASE_PATH}}/assets/wp-images-de/image1975.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb1111.png" width="429" height="360"></a></p>
