---
layout: post
title: "Source Maps – Javascript wird wieder les- und wartbar!"
date: 2012-04-10 23:49
author: robert.muehsig
comments: true
categories: [Allgemein]
tags: [Browser, Chrome, Javascript]
language: de
---
{% include JB/setup %}
<p>In der Webentwicklung gehört es heute zur gelernten Praxis, dass ausgelieferte Javascript Dateien zusammengefasst und komprimiert werden. Auch andere Sprachen, welche sich zu Javascript “kompilieren” lassen, wie z.B. Coffeescript oder das Google Web Toolkit kennt und nutzt man. Größtes “Ärgernis” als Entwickler: Die Dateien sind so stark verändert, sodass ein Debugging beinah unmöglich ist. Ohne Umwege geht es bislang nicht.</p> <p><strong>Google und Mozilla arbeiten nun an einer Verbesserung dieser Situation, genannt Source Maps:</strong></p> <p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:c8b717f4-9724-47d0-a3a2-2e6434d07cf1" class="wlWriterEditableSmartContent"><div><object width="448" height="252"><param name="movie" value="http://www.youtube.com/v/-xJl22Kvgjg#!?hl=en&amp;hd=1"></param><embed src="http://www.youtube.com/v/-xJl22Kvgjg#!?hl=en&amp;hd=1" type="application/x-shockwave-flash" width="448" height="252"></embed></object></div></div></p> <p>Wer einen aktuellen Chrome hat, sollte auch diese Checkbox sehen.</p> <p><strong>Ich hab das Video nicht angeschaut – was sind Source Maps?</strong></p> <p>Source Maps sind eine Art “Lesezeichen” für komprimierten und minifizierten Javascript Code. Durch die Source Maps können die “originalen” Dateien wieder hergestellt werden ohne die unnötigen Overhead. </p> <p><strong>Wo ist der Haken?</strong></p> <p>Man benötigt natürlich einen “Javascript Compiler”, welcher Source Maps erstellt. Momentan ist der Closure Compiler wohl der einzige, der dies unterstützt. Andere werden vermutlich folgen.</p> <p><strong>Demo (mit aktuellem Chrome getestet) :</strong> <a href="http://dev.fontdragr.com/"><strong>http://dev.fontdragr.com/</strong></a></p> <p> Ohne Source Maps wird eine Javascript Datei erzeugt:</p> <p><a href="{{BASE_PATH}}/assets/wp-images-de/image1503.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb674.png" width="288" height="236"></a></p> <p>Mit Source Map aktiv:</p> <p><a href="{{BASE_PATH}}/assets/wp-images-de/image1504.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images-de/image_thumb675.png" width="285" height="364"></a></p> <p>Lesbar!</p> <p><strong>Was macht Mozilla in dem Gebiet?</strong></p> <p>Auch Mozilla arbeitet an dem Support der Source Maps. </p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:18c25772-8cc9-4c9e-9833-dbf9c7ac3b7b" class="wlWriterEditableSmartContent"><div><object width="448" height="252"><param name="movie" value="http://www.youtube.com/v/2aQw1dSIYko?hl=en&amp;hd=1"></param><embed src="http://www.youtube.com/v/2aQw1dSIYko?hl=en&amp;hd=1" type="application/x-shockwave-flash" width="448" height="252"></embed></object></div></div>     <p><strong>Wie wird eine Source Map erstellt?</strong></p> <p>Momentan über den <a href="https://developers.google.com/closure/compiler/">Closure Compiler</a>. Am Ende des Blogposts kommen noch weiterführende Links.</p> <p>Wie sieht eine Source Map aus?</p> <p>Eine Source Map ist einfach ein JSON File, welches der Browser zum Debuggen runterladen kann.</p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:3e6ce926-e7d0-4925-9f8d-be0d3ff0aeb6" class="wlWriterEditableSmartContent"><pre name="code" class="c#">{
    version : 3,
    file: "out.js",
    sourceRoot : "",
    sources: ["foo.js", "bar.js"],
    names: ["src", "maps", "are", "fun"],
    mappings: "AAgBC,SAAQ,CAAEA"
}</pre></div>
<p> Am wichtigsten ist die Zeile 7 – dort geschieht das Mapping. Wie das genau gemacht wird, steht <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">hier</a>.</p>
<p><strong>Interessiert? Dann gehts hier weiter…</strong></p>
<p><a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">Introducing Javascript Source Maps auf HTML5Rocks.com</a>: Einstiegsbeitrag mit Erklärung wie die Source Map im Detail aufgebaut ist.</p>
<p><a href="https://github.com/mozilla/source-map">Mozilla´s Source Map Projekt auf GitHub</a>: Enthält noch einige interessante Links zu Mozilla Seiten zu diesem Thema. Auch Implementierungscode findet man dort.</p>
<p><a href="https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1">Source Map Revision 3 Proposal</a>: Der “Standard” Vorschlag.</p>
<p><strong>Was machen eigentlich die anderen Browserhersteller?</strong></p>
<p>Zu Microsoft, Apple und Opera konnte ich diesbezüglich nicht finden.&nbsp; </p>
