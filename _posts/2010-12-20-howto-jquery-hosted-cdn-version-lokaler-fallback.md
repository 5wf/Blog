---
layout: post
title: "HowTo: jQuery Hosted CDN Version & lokaler “Fallback”"
date: 2010-12-20 20:34
author: robert.muehsig
comments: true
categories: [HowTo]
tags: [CDN, HowTo, jQuery]
---
<p><a href="{{BASE_PATH}}/assets/wp-images/image1144.png"><img style="border-bottom: 0px; border-left: 0px; margin: 0px 10px 0px 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" align="left" src="{{BASE_PATH}}/assets/wp-images/image_thumb326.png" width="182" height="74" /></a> </p>  <p><a href="http://docs.jquery.com/Downloading_jQuery">jQuery</a> ist eine der bekanntesten Javascript Frameworks. Allerdings hat es auch schon eine gewisse Größe erreicht - um Traffic zu sparen und noch etwas Ladegeschwindigkeit zu reduzieren kann man auch die "CDN” (quasi hosted) jQuery Version nehmen. Doch wie genau kann man im Notfall noch eine lokale Backup Strategie fahren? Antworten gibt jetzt...</p> <!--more-->  <p><strong>jQuery CDN</strong></p>  <p>jQuery selbst, Google und Microsoft bieten jQuery (+ einige bekannte Plugins) zur Verlinkung auf ihren Servern an. Mehr darüber erfahrt ihr auf <a href="http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery">diesen Seiten</a>.</p>  <p><strong>Warum sollte man das tun?</strong></p>  <p>Es gibt mehrere Gründe die dafür sprechen können, die gehostete Variante zu nehmen:</p>  <ul>   <li>Man spart sich den Traffic. jQuery und co. können durchaus eine markante Größe im Traffic einnehmen. </li>    <li>Google und co. <a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDNs</a> sind genau für solche Sachen angelegt. Wenn jemand schnell Content zur Verfügung stellen kann, dann auf solchen Netzwerken.</li>    <li>Lange Zeit haben Browser nicht mehr als zwei Javascript Dateien von einer Domain geladen. Wenn man jQuery nun von google.com zieht, dann kann der Browser parallel bereits andere applikationsspezifische Dateien laden. Ob das heute noch so eine Rolle spielt kann ich aber nicht mit letzter Sicherheit sagen ;)</li>    <li>Viele Leute nutzen Google oder Microsofts Dienste oder gehen auf eine Website, welche die jQuery Version von ihnen einbindet. D.h. es besteht die große Chance, dass der Browser jQuery schon irgendwo gecacht da hat - somit fallen Ladezeiten geringer aus!</li>    <li>Mehr Informationen gibt es z.B. auch noch auf der <a href="http://developer.yahoo.com/performance/rules.html">Yahoo Best Practices</a> Seite.</li> </ul>  <p><strong>Welches CDN sollte man nutzen? Microsoft oder Google?</strong></p>  <p>Letztendlich sind beide Dienste ähnlich was das jQuery Hosting angeht. Vermutlich nutzen aber mehr Leute das Google CDN - d.h. die Chance bei Google ist da größer. Hingegen hat Microsoft für ASP.NET Entwickler mit dem ScriptManager ein paar Spielerein eingebaut - brauchen wir aber eigentlich nicht ;)</p>  <p>Hier mal eine Diskussion von Stackoverflow: <a href="http://stackoverflow.com/questions/1447184/microsoft-cdn-for-jquery-or-google-cdn">Microsoft CDN for JQuery or Google CDN?</a></p>  <p><strong>Warum sollte man es nicht nutzen?</strong></p>  <p>Ganz klar gibt es auch Gründe dagegen. Für interne Applikationen fällt es so oder so aus (da braucht man es aber auch eher weniger) oder wenn man den Dienstleistern nicht vertraut - immerhin hat man eine gewisse Abhängigkeit.</p>  <p><strong>Was passiert wenn es doch mal bei Google/Microsofts/jQuery CDN Probleme gibt?</strong></p>  <p>Nun ja... ich denke zwar nicht, dass eines der CDN so schnell down gehen würde, aber manchmal gibt es vielleicht doch Probleme das CDN zu erreichen. Daher empfehle ich eine eigenes Backup anzulegen und dies im Notfall einzubinden:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:5b7980ef-a99b-4a1b-a519-0c52e03e8341" class="wlWriterEditableSmartContent"><pre name="code" class="c#">&lt;script src="//code.jquery.com/jquery-1.4.4.min.js"&gt;&lt;/script&gt;
&lt;script&gt;!window.jQuery &amp;&amp; document.write(unescape('%3Cscript src="LOKALER_JQUERY_PFAD"%3E%3C/script%3E'))&lt;/script&gt;</pre></div>

<p>Da wo "LOKALER_JQUERY_PFAD” steht einfach die entsprechende Pfadangabe angeben. In der Zeile eins wird vom jQuery CDN jQuery eingebunden. Kleiner <em>Hinweis: Wenn es eine HTTP Seite ist würde </em><a href="http://code.jquery"><em>http://code.jquery</em></a><em>... aufgerufen. Wenn es jedoch eine HTTPS Seite ist, wird https://... eingebunden. Das macht dieser "//” Syntax.</em></p>

<p><strong>Falls nun doch code.jQuery.com down sein sollte</strong></p>

<p>Per Javascript würde in diesem Fall automatisch die lokale Version eingebunden.</p>
