---
layout: post
title: "Die Magie hinter den Windows Phone 8 Entwicklungstools: Hyper-V, der Emulator & co."
date: 2013-01-23 00:47
author: robert.muehsig
comments: true
categories: [Allgemein]
tags: [Windows Phone]
---
<p>Bislang hatte ich mich nicht wirklich für Windows Phone interessiert, aber da ich seit kurzem Besitzer eines Windows Phone 8 bin kann ein Blick auf die Entwicklertools ja nicht schaden ;)</p> <p><strong><u>Achtung:</u></strong> Das pure Benutzen der Tools ist super einfach. <strong>Alles was ich hier beschreibe </strong>sind nur meine Beobachtungen <strong><u>was hinter den Kulissen geschieht und benötigt man für die normale Entwicklung vermutlich nicht direkt</u></strong>.</p> <p><strong>Die Installation des Windows Phone 8 SDK &amp; Emulators</strong></p> <p>Das <a href="http://www.microsoft.com/en-us/download/details.aspx?id=35471"><strong>Windows Phone 8 SDK bzw. der mitgelieferter Emulator</strong></a> lässt sich nur auf Windows 8 Pro oder Enterprise installieren (so steht es zumindest in den <a href="http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx">System Voraussetzungen</a>). Grund dafür ist, dass Hyper-V, Microsofts Virtualisierungsplattform, vorausgesetzt wird. D.h.: <strong>Der Emulator läuft als Virtuelle Maschine im Hyper-V</strong>. </p> <p><em>Randnotiz: Hyper-V ist ohnehin ein ziemlich mächtiges Tool und <a href="http://code-inside.de/blog/2012/12/26/hyper-v-in-windows-8-mini-private-cloud-im-pc/">sollte wenigstens als Entwickler auf der Windows Plattform bekannt sein</a>.</em></p> <p><strong>Windows Phone Images</strong></p> <p>Die .vhd´s für die diversen Windows Phone Arten werden hier hinterlegt:</p> <p>C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Emulation\Images</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1715.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb871.png" width="536" height="174"></a></p> <p><strong>Der Weg ins Hyper-V</strong>&nbsp;</p> <p>Nach der Installation ist erstmal keine Änderungen im Hyper-V festzustellen. Erst wenn man den Emulator im Visual Studio gestartet hat, wird das Image im Hyper-V als Virtuelle Maschine provisioniert:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1716.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb872.png" width="552" height="428"></a> </p> <p>Hierbei wird allerdings eine <strong>Kopie</strong> der vhd genutzt, sodass man die Maschine bei Problemen jederzeit löschen kann:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1717.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb873.png" width="461" height="179"></a></p> <p>Man kann auch diese Maschinen direkt über die Hyper-V Tools starten und das Windows Phone UI erscheint:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1718.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb874.png" width="565" height="354"></a> </p> <p>Snapshots &amp; andere Hyper-V Features können natürlich weiterhin benutzt werden.</p> <p><strong>Der Emulator</strong></p> <p>Der Emulator selbst ist in einem anderen Verzeichnis gespeichert:</p> <p>C:\Program Files (x86)\Microsoft XDE\8.0</p> <p>Wenn man XDE.exe direkt aufruft kommt eine Fehlermeldung:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1719.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb875.png" width="409" height="420"></a> </p> <p>Über die Kommandozeile mit /help oder /? aufgerufen kommt die Kommandozeilenreferenz:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1720.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb876.png" width="441" height="457"></a> </p> <p>Ohne es ausprobiert zu haben scheint der Emulator direkt mit dem Hyper-V auf der lokalen Maschine zu reden und nach dem Booten die Maschine in den Emulator anzuzeigen. </p> <p>Der Emulator kann natürlich noch weit mehr als nur einen Rahmen um das Hyper-V Fenster zu zeichnen ;)</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1721.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb877.png" width="544" height="486"></a> </p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1722.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb878.png" width="548" height="491"></a> </p> <p><strong>Emulator Skins</strong></p> <p>Im Installationsverzeichnis des Emulators findet man auch den Skin:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1723.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb879.png" width="479" height="383"></a> </p> <p>Dieser lässt sich natürlich noch austauschen. Da es aber wohl doch etwas nervig ist die verschiedenen Dateien auszutauschen hat jemand <a href="http://wp8emulatorskins.codeplex.com/"><strong>ein Tool veröffentlicht</strong></a> (das ganze ging wohl auch schon mit dem Windows Phone 7 Emulator – also nix neues)</p> <p><a href="http://wp8emulatorskins.codeplex.com/"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image1724.png" width="522" height="409"></a>&nbsp;</p> <p><strong>Das Ganze im Zusammenspiel in Visual Studio</strong></p> <p>Visual Studio vereint am Ende Emulator, Builden des Codes, das Tooling und das eigentliche Windows Phone Image: Taddaaa!</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image1725.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="{{BASE_PATH}}/assets/wp-images/image_thumb880.png" width="566" height="303"></a> </p> <p>Vom ersten Blick her scheint das alles mehr oder weniger durchdacht zu sein – schauen wir mal ob ich noch mehr dazu schreibe :)</p> <p><a href="http://www.microsoft.com/en-us/download/details.aspx?id=35471"><strong>Zum Download vom SDK</strong></a></p>
