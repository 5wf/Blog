---
layout: page
title: "HowTo: Microsoft p&p - Web Service Factory / Service Factory (Teil 1: Grundlagen & ASMX Variante)"
date: 2007-10-21 22:30
author: robert.muehsig
comments: true
categories: []
tags: []
---
<p><a href="{{BASE_PATH}}/assets/wp-images/image80.png" atomicselection="true"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="67" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb59.png" width="335" border="0"></a> </p> <p>In dem <a href="http://code-inside.de/blog/artikel/howto-microsoft-patterns-practices-software-factories-verstehen/">vorherigem HowTo</a> ging es allgemein um Software Factories von dem <a href="http://msdn2.microsoft.com/en-us/practices/default.aspx">patterns&amp;practices Team</a> - heute widmen wir uns mehr der <a href="http://msdn2.microsoft.com/en-us/library/aa480534.aspx">Web Service Factory - auch Service Factory</a> genannt.</p> <p><strong>Wichtigste Ressource:</strong></p> <p>Auf der MSDN Seite der Web Service Factory gibts einen groben Überblick was es alles für Quellen gibt - die meisten Sachen sind allerdings auf <a href="http://www.codeplex.com/servicefactory">Codeplex</a>.</p> <p>&nbsp;</p> <p><strong>Service Factory installieren und die HOLs dazu installieren:</strong></p> <p>Im MS Downloadbereich kann man den <a href="http://www.microsoft.com/downloads/details.aspx?familyid=db996113-6e92-4894-9b7e-0debb614d72f%20&amp;displaylang=en">aktuellen Release (vom Dezember 2006) runterladen</a>, dieser beinhaltet jeweils für C#:</p> <ul> <li>ASMX Services</li> <li>WCF Services </li></ul> <p>Nach der Installation hat man dann im Visual Studio 2 neue Projekttypen:</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image81.png" atomicselection="true"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="158" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb60.png" width="410" border="0"></a> </p> <p>Dazu (um die ganze Sache mehr zu verstehen) würde ich noch die <a href="http://www.codeplex.com/servicefactory/Wiki/View.aspx?title=HandsOnLab&amp;referringTitle=Home">HOLs ebenfalls runterladen</a>. Im nächsten Schritt werde ich grob das Resultat des HOLs erklären.<br>Es gibt diese HOLs einmal für ASMX Services und WCF Services - ich werde ganz kurz auf die Struktur von der ASMX Variante eingehen und später aber direkt mit WCF arbeiten, da dies in der Zukunft ASMX ablöst. Ich würde jedem empfehlen, die Exercise mal durchzugehen, man braucht grob 1-2h dafür.</p> <p><strong>Erklärung an den HOLs in der ASMX Variante:</strong></p> <ul> <li>Start (nachdem man sich durch die Wizards geklickt hat):</li></ul> <p><u><a href="{{BASE_PATH}}/assets/wp-images/image82.png" atomicselection="true"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="373" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb61.png" width="486" border="0"></a> </u></p> <p>Man kann den Aufbau grob in 3 Teile gliedern: </p> <ul> <li>BusinessLayer </li> <li>DataLayer</li> <li>ServiceLayer</li></ul> <p>In dem BusinessLayer (BusinessEntities/BusinessLogic) werden die einzelnen Klassen angelegt, die wir benötigen um die Daten darzustellen und eine gewisse Logik enthalten.<br>Der DataLayer gibt direkt Zugriff auf eine Datenbank - ideal ist natürlich MS SQL, aber es müsste auch Oracle und co. gehen - mit den Create/Read/Update/Delete Befehlen.<br>Im Servicelayer machen wir dann unsere Operationen zugänglich.<br>Jede Schicht ist nur lose miteinander gekoppelt - zum Beispiel hat der Service Layer ebenfalls ein DataType: Ob man diesen jedoch braucht, hängt ganz vom eigenen Geschmack ab. Man kann es nutzen, muss aber nicht.</p> <p><u>Grobe Erläuterung der einzelnen Projekte:</u></p> <ul> <li>Coho.ClubServices.Membership.<strong>DataAccess</strong>: </li> <ul> <li>Zugriffsschicht auf Datenbank und gibt dieses an die BusinessEntities weiter</li></ul> <li>Coho.ClubServices.Membership.<strong>BusinessEntities</strong>: </li> <ul> <li>Logische Daten</li></ul> <li>Coho.ClubServices.Membership.<strong>BusinessLogic</strong>:</li> <ul> <li>Irgendwelche logischen Operationen oder Managementklassen um die Entities zu bearbeiten etc.</li></ul> <li>Coho.ClubServices.Membership.<strong>DataTypes</strong>:</li> <ul> <li>Mapping zwischen den Entities die man in dem Service benutzt und den eigentlichen BusinessEntities</li></ul> <li>Coho.ClubServices.Membership.<strong>ServiceContract</strong>:</li> <ul> <li>Beschreibt, welche Operationen generell möglich sind -&nbsp;hier sind nur Interfaces vorhanden</li></ul> <li>Coho.ClubServices.Membership.<strong>ServiceImplementation</strong>:</li> <ul> <li>Die Implementierung des Contracts</li></ul> <li>Coho.ClubServices.Membership.<strong>Host</strong>:</li> <ul> <li>Hostet die Service Implementierung</li></ul></ul> <p>Das andere Projekt dient zum Testen des Service.</p> <ul> <li>Ende (nach Exercise 10):</li></ul> <p><a href="{{BASE_PATH}}/assets/wp-images/image83.png" atomicselection="true"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="281" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb62.png" width="485" border="0"></a> </p> <p>Wie man hier schon sieht - einige Projekte sind entfernt wurden. </p> <p>Die Struktur am Anfang wurde vereinfacht. So beinhaltet jetzt das BusinessLogic Projekt auch neben der eigentlichen Logik auch die Entities und die Data Access Schicht.</p> <p><a href="{{BASE_PATH}}/assets/wp-images/image84.png" atomicselection="true"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="133" alt="image" src="{{BASE_PATH}}/assets/wp-images/image-thumb63.png" width="347" border="0"></a> </p> <p>Das sollte bereits zeigen, dass die Struktur auch jeweils an die Bedürfnisse angepasst werden kann.</p> <p>Im nächsten HowTo wird es dann um die WCF Variante gehen und wie man dies praktisch implementiert.</p> <p>&nbsp;</p> <p><strong>Links:</strong></p> <p><a href="http://code-inside.de/blog/artikel/howto-microsoft-patterns-practices-software-factories-verstehen/">Grundlagen HowTo</a><br><a href="http://msdn2.microsoft.com/en-us/practices/default.aspx">patterns&amp;practices Team @ MSDN</a><br><a href="http://msdn2.microsoft.com/en-us/library/aa480534.aspx">Web Service Factory @ MSDN</a><br><a href="http://www.codeplex.com/servicefactory">Web Service Factory / Service Factory @ Codeplex</a><br><a href="http://www.microsoft.com/downloads/details.aspx?familyid=db996113-6e92-4894-9b7e-0debb614d72f%20&amp;displaylang=en">Download: Web Service Factory Release Dezember 2006</a><br><a href="http://www.codeplex.com/servicefactory/Wiki/View.aspx?title=HandsOnLab&amp;referringTitle=Home">Hands-on-Lab mit ASMX und WCF</a></p>
